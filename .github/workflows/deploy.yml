name: Build/deployon:  workflow_dispatch:  push:env:  AWS_ACCOUNT_ID_DEV: 544312030237  AWS_ACCOUNT_ID_PROD: 635800996936  AWS_CLOUDFRONT_DISTRIBUTION_DEV: E1TS4SM78DE9KM  AWS_CLOUDFRONT_DISTRIBUTION_PROD: E1MTUL2ST60AT9permissions:  actions: read  checks: read  contents: read  deployments: read  id-token: write  issues: read  packages: read  pull-requests: read  repository-projects: read  security-events: read  statuses: readjobs:  lint-test:    name: ðŸ“‹ Lint, Test and Build Website    runs-on: ubuntu-latest    steps:      - uses: actions/checkout@v3      - uses: actions/setup-node@v3.6.0        with:          node-version: 18      - run: deployment/scripts/lint_test.sh  build-dev:    name: ðŸ”¨ Build Website (DEV)    needs:      - lint-test    runs-on: ubuntu-latest    steps:      - uses: actions/checkout@v3      - uses: actions/setup-node@v3.6.0        with:          node-version: 18      - run: deployment/scripts/build.sh dev      - uses: actions/upload-artifact@v3        with:          name: dev-build.zip          path: dev-build.zip  deploy-to-dev:    name: ðŸ›¶  Deploy to dev    needs:      - lint-test      - build-dev    runs-on: ubuntu-latest    if: ${{ github.event_name == 'workflow_dispatch' || (github.event_name == 'push' && github.event.ref == 'refs/heads/main') }}    steps:        - uses: actions/checkout@v3        - uses: actions/setup-node@v3.6.0          with:            node-version: 18        - uses: actions/download-artifact@v3          with:            name: dev-build.zip            path: deployment        - uses: aws-actions/configure-aws-credentials@v2          with:            role-to-assume: arn:aws:iam::${{ env.AWS_ACCOUNT_ID_DEV }}:role/infra-service-deployment            role-session-name: web-app-deploy-role            aws-region: eu-west-2#        - name: Run Cloudfront invalidation#          run: aws cloudfront create-invalidation --distribution-id ${{ env.AWS_CLOUDFRONT_DISTRIBUTION_DEV }} --paths "/*"        - run: deployment/scripts/deploy_dev.sh  build-prod:    name: ðŸ”¨ Build Website (PROD)    needs:      - lint-test      - build-dev      - deploy-to-dev    runs-on: ubuntu-latest    steps:      - uses: actions/checkout@v3      - uses: actions/setup-node@v3.6.0        with:          node-version: 18      - run: deployment/scripts/build.sh prod      - uses: actions/upload-artifact@v3        with:          name: prod-build.zip          path: prod-build.zip  deploy-to-prod:    name: ðŸš¢ Deploy to prod    needs:      - lint-test      - build-dev      - build-prod      - deploy-to-dev    runs-on: ubuntu-latest    if: ${{ github.event_name == 'workflow_dispatch' || (github.event_name == 'push' && github.event.ref == 'refs/heads/main') }}    steps:      - uses: actions/checkout@v3      - uses: actions/setup-node@v3.6.0        with:          node-version: 18      - uses: actions/download-artifact@v3        with:          name: prod-build.zip          path: deployment      - uses: aws-actions/configure-aws-credentials@v2        with:          role-to-assume: arn:aws:iam::${{ env.AWS_ACCOUNT_ID_PROD }}:role/infra-service-deployment          role-session-name: web-app-deploy-role          aws-region: eu-west-2#      - name: Run Cloudfront invalidation#        run: aws cloudfront create-invalidation --distribution-id ${{ env.AWS_CLOUDFRONT_DISTRIBUTION_PROD }} --paths "/*"      - run: deployment/scripts/deploy_prod.sh